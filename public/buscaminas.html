
<html>
<head>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
</head>
<body>
<h1>Buscaminas</h1>
  <div class="tablero">
  <button id="0">&nbsp;</button>
  <button id="1">&nbsp;</button>
  <button id="2">&nbsp;</button>
  <button id="3">&nbsp;</button>
  </div>
  
  
<h2>Â¿QuÃ© es el buscaminas?</h2>
  <p>
  El buscaminas es un juego que consta de un tablero cuadrado, dividido en cuadros iguales. 
  Estos cuadros son posiciones que ocultan bajo sÃ­, uno de ciertos valores:
  </p>
  <table>
  <tr>
  <td>1, 2, 3, 4:</td>
  <td>Un valor numÃ©rico N indica que N cuadros contiguos contienn una Bomba</td>
  </tr>
  <tr>
    <td>Bomba</td>
    <td>Indica que valiÃ³ verga la pata del mameitor (perdiste el juego)</td>
  </tr>
  <script>
$(document).ready(funcion(){
    function rand(max) {
    return Math.floor(Math.random() * Math.floor(max));
  }
  var tablero = [];
  var bombaNoBomba = ['ðŸ’£', ' '];
  var numero_bombas_max = 4;
  var numeroPiezasTablero = 4;
  var gameover = 'http://www.larubiadelpueblo.com/wp-content/uploads/2018/01/hashtags-se-te-acabo-la-fiesta.gif';

  function inciar_tablero() {
    var i, j;
    for (i = 0; i < numeroPiezasTablero; i++) {
      tablero[i] = [];
      for (j = 0; j < numeroPiezasTablero; j++) {
        tablero[i][j] = 0;
      }
    }
    /*repartir bombas*/
    var n = 0;
    for (n = 0; n < numero_bombas_max; n++) {
      var bomba = bombaNoBomba[rand(2)];
      i = rand(numeroPiezasTablero);
      j = rand(numeroPiezasTablero);
      tablero[i][j] = bomba;
    }

    //alert(tablero);
    /*poner pistas*/
    for (i = 0; i < numeroPiezasTablero; i++) {
      for (j = 0; j < numeroPiezasTablero; j++) {
        if (tablero[i][j] === bombaNoBomba[0]) {
          /*significa que hay bomba*/
          if (i > 0 && j > 0) tablero[i - 1][j - 1] += 1;
          if (i > 0) tablero[i - 1][j] += 1;
          if (i > 0 && j < numeroPiezasTablero - 1) tablero[i - 1][j + 1] += 1;
          if (j > 0) tablero[i][j - 1] += 1;
          if (j < numeroPiezasTablero - 1) tablero[i][j + 1] += 1;
          if (i < numeroPiezasTablero - 1 && j > 0) tablero[i + 1][j - 1] += 1;
          if (i < numeroPiezasTablero - 1) tablero[i + 1][j] += 1;
          if (i < numeroPiezasTablero - 1 && j < numeroPiezasTablero - 1)
            tablero[i + 1][j + 1] += 1;
          //alert(tablero);
        }
      }
    }
    for (i = 0; i < numeroPiezasTablero; i++) {
      var row = document.createElement('div');
      for (j = 0; j < numeroPiezasTablero; j++) {
        if (tablero[i][j] == 0)
          tablero[i][j] = 'ðŸ¾';
        var but = document.createElement('button');
        but.id = i + '-' + j;
        but.innerHTML = 'â˜ï¸';
        row.appendChild(but);
      }
      document.getElementById('tablero').appendChild(row);
    }
  }
  inciar_tablero();
  $("button").on("click", function(e) {
    var pisada = e.target;
    var i = pisada.id.split('-')[0];
    var j = pisada.id.split('-')[1];

    if (tablero[i][j] === bombaNoBomba[0]) {
      var fin = document.createElement('img');
      fin.src = gameover;
      $('#anuncios').append(fin); { //revelar el resto del tablero
        var i, j;
        for (i = 0; i < numeroPiezasTablero; i++)
          for (j = 0; j < numeroPiezasTablero; j++) {
            $('#' + i + '-' + j).html(tablero[i][j]);
          }
      }
      $('#tablero').children().prop('disabled', true);

    } else {
      pisada.innerText = tablero[i][j];
    }

  });
    });
    </script>

  </body>
  </html>
